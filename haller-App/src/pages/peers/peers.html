<!--
  Generated template for the Peers page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
  <ion-toolbar no-border-top color="primary" hideBackButton>
    <ion-buttons left *ngIf="chooseUser">
      <button ion-button color="light" (click)="goBack()">Back</button>
    </ion-buttons>
    <ion-segment [(ngModel)]="selectedPeers" color="colorwhite">
      <ion-segment-button value="residents" (ionSelect)="changeSegment('residents')">
        Hall
      </ion-segment-button>
      <ion-segment-button value="all" (ionSelect)="changeSegment('all')">
        Campus
      </ion-segment-button>
    </ion-segment>
    <ion-buttons right *ngIf="chooseUser">
      <button ion-button color="light" (click)="goBack()">Done</button>
    </ion-buttons>
  </ion-toolbar>
  <ion-searchbar (ionInput)="getItems($event)"></ion-searchbar>
</ion-header>


<ion-content>
  <ion-list class="peer-list">
    <ng-template ngFor let-peer [ngForOf]="peersList | peersearch:['firstName','lastName',searchText]">
      <button ion-item *ngIf="peer._id != userInfo._id" (click)="viewProfile(peer)" [ngClass]="isUserSelected(peer)?'select':''">
        <ion-avatar item-left>
          <!-- <img [src]=" peer.currentProfile ? peer.currentProfile.secure_url : userAvatar "> -->
          <img [src]="profileProvider.httpClient.getProfileImageToDisplay(peer)">
        </ion-avatar>
        {{ peer.firstName + ' ' + peer.lastName }}
      </button>
    </ng-template>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event) ">
    <ion-infinite-scroll-content loadingSpinner="bubbles ">
      <!--loadingText="Loading more data... ">-->
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
